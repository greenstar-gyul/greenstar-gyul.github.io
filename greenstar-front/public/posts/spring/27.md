# ğŸŸ¡ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ - (9) JPAì™€ Hibernate

## ğŸ’¡ JPA(Java Persistence API)ë€?

> ìë°”ì—ì„œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê°ì²´ì§€í–¥ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í‘œì¤€ ëª…ì„¸ì˜ˆìš”!

JPAëŠ” **Java Persistence API**ì˜ ì•½ìë¡œ, ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì •ì˜í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ë§ ê·¸ëŒ€ë¡œ **ê¸°ìˆ  ëª…ì„¸**ì´ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œ ì‚¬ìš©í•˜ë ¤ë©´ JPAë¥¼ êµ¬í˜„í•œ **Hibernate**, **EclipseLink**, **DataNucleus** ê°™ì€ ORM í”„ë ˆì„ì›Œí¬ê°€ í•„ìš”í•´ìš”!

> JDBCê°€ íŠ¹ì • DBMSì— ì¢…ì†ë˜ì§€ ì•ŠëŠ” ê²ƒì²˜ëŸ¼, JPA APIë¥¼ ì´ìš©í•˜ë©´ ì†ŒìŠ¤ ìˆ˜ì • ì—†ì´ ORM í”„ë ˆì„ì›Œí¬ë¥¼ êµì²´í•  ìˆ˜ ìˆì–´ìš”! ğŸ˜Š

---

## ğŸ“˜ JPA ë“±ì¥ ë°°ê²½ê³¼ ì¥ë‹¨ì 

### ğŸš¨ ê¸°ì¡´ ê°œë°œ ë°©ì‹ì˜ ë¬¸ì œì 

* **ë°˜ë³µì ì¸ CRUD ì‘ì—…**: ìœ ì‚¬í•œ SQLì„ ê³„ì† ì‘ì„±í•´ì•¼ í•¨
* **ê°•í•œ ì˜ì¡´ì„±**: ì¿¼ë¦¬ê°€ ë³€ê²½ë˜ë©´ DTO, DAO í´ë˜ìŠ¤ë„ ëª¨ë‘ ìˆ˜ì •
* **í˜ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜**: ê°ì²´ì§€í–¥ê³¼ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ê°„ì˜ ì°¨ì´

### âœ… JPAì˜ ì¥ì 

* **ê°ì²´ì§€í–¥ì  ê°œë°œ**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆìŒ
* **ìƒì‚°ì„± í–¥ìƒ**: ë©”ì„œë“œ í˜¸ì¶œë§Œìœ¼ë¡œ ì¿¼ë¦¬ ì‹¤í–‰
* **ìœ ì§€ë³´ìˆ˜ì„±**: í…Œì´ë¸” ìƒì„±, ë³€ê²½, ê´€ë¦¬ê°€ ì‰¬ì›€
* **ë²¤ë” ë…ë¦½ì„±**: íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ì— ì¢…ì†ë˜ì§€ ì•ŠìŒ

### âš ï¸ JPAì˜ í•œê³„

* **ë³µì¡í•œ ì¿¼ë¦¬ í•œê³„**: í†µê³„ë‚˜ ë³µì¡í•œ ì¡°ì¸ ì¿¼ë¦¬ëŠ” ì–´ë ¤ì›€
* **ì„±ëŠ¥ ì´ìŠˆ**: Raw Query ëŒ€ë¹„ ì„±ëŠ¥ì´ ëŠë¦´ ìˆ˜ ìˆìŒ
* **í•™ìŠµ ê³¡ì„ **: ê°ì²´-ê´€ê³„ ë§¤í•‘ ê°œë… ì´í•´ í•„ìš”

> ë³µì¡í•œ ì¿¼ë¦¬ëŠ” **JPQL**ì´ë‚˜ **QueryDSL**ë¡œ ë³´ì™„í•  ìˆ˜ ìˆì–´ìš”!

---

## ğŸ”§ JPA êµ¬ì¡°ì™€ Hibernate

### ğŸ“Š JPA ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Application   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  JPA Interface  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Hibernate     â”‚  â†â”€â”€ JPA êµ¬í˜„ì²´
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      JDBC       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Database      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’¡ Hibernateë€?

**Hibernate**ëŠ” JPA ëª…ì„¸ì˜ ê°€ì¥ ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ì˜ˆìš”! Bossì—ì„œ ê°œë°œí•œ ORM í”„ë ˆì„ì›Œí¬ë¡œ, íŠ¹ì • í´ë˜ìŠ¤ì— ë§¤í•‘ëœ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ê´€ê³„ë¥¼ XML íŒŒì¼ì´ë‚˜ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆì–´ìš”.

> **í•µì‹¬ í¬ì¸íŠ¸**: ë°ì´í„°ë² ì´ìŠ¤ê°€ ë³€ê²½ë˜ì–´ë„ Hibernateì˜ dialect ì„¤ì •ë§Œ ë°”ê¾¸ë©´ ë¼ìš”!

### ğŸŒŸ Spring Data JPA

Spring Data JPAëŠ” JPAë¥¼ í•œ ë‹¨ê³„ ë” ì¶”ìƒí™”í•œ **Repository ì¸í„°í˜ì´ìŠ¤**ë¥¼ ì œê³µí•´ìš”. ì •í•´ì§„ ê·œì¹™ëŒ€ë¡œ ë©”ì„œë“œ ì´ë¦„ì„ ì‘ì„±í•˜ë©´, Springì´ ìë™ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ìƒì„±í•´ì„œ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤!

```java
// ì´ë ‡ê²Œ ë©”ì„œë“œ ì´ë¦„ë§Œ ì •ì˜í•˜ë©´
public interface CustomerRepository extends JpaRepository<Customer, Long> {
    List<Customer> findByName(String name);        // ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰
    List<Customer> findByNameLike(String keyword); // ì´ë¦„ LIKE ê²€ìƒ‰
    List<Customer> findByPhone(String phone);      // ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰
}
```

---

## âš™ï¸ Hibernate ì£¼ìš” ì„¤ì •

### ğŸ“‹ hibernate.properties ì„¤ì •

| ì†ì„± | ì„¤ëª… | ì˜ˆì‹œê°’ |
|------|------|--------|
| `hibernate.dialect` | ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ ì§€ì • | `org.hibernate.dialect.OracleDialect` |
| `hibernate.show_sql` | ìƒì„±ëœ SQLì„ ì½˜ì†”ì— ì¶œë ¥ | `true` |
| `hibernate.format_sql` | SQLì„ ë³´ê¸° ì¢‹ê²Œ í¬ë§·íŒ… | `true` |
| `hibernate.use_sql_comments` | SQLì— ì£¼ì„ í¬í•¨ | `true` |
| `hibernate.hbm2ddl.auto` | DDL ìë™ ì²˜ë¦¬ ë°©ì‹ | `update` |

### ğŸ¯ hibernate.hbm2ddl.auto ì˜µì…˜

| ê°’ | ì„¤ëª… |
|---|------|
| `create` | ê¸°ì¡´ í…Œì´ë¸” DROP í›„ ìƒˆë¡œ ìƒì„± |
| `create-drop` | create + ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œ DROP |
| `update` | ë³€ê²½ì‚¬í•­ë§Œ ë°˜ì˜ (ALTER) |
| `validate` | ìŠ¤í‚¤ë§ˆ ê²€ì¦ë§Œ ìˆ˜í–‰ |
| `none` | ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ |

> **ì‹¤ë¬´ íŒ**: ê°œë°œí™˜ê²½ì—ì„œëŠ” `update`, ìš´ì˜í™˜ê²½ì—ì„œëŠ” `validate` ë˜ëŠ” `none`ì„ ì‚¬ìš©í•´ìš”!

---

## ğŸ—ï¸ Entity í´ë˜ìŠ¤ ì‘ì„±

### âœï¸ ê¸°ë³¸ Entity êµ¬ì¡°

```java
@Entity
@Table(name = "CUSTOMER")
public class Customer {
    
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    
    @Column(length = 20, nullable = false)
    private String name;
    
    @Column(length = 20, nullable = false, unique = true)
    private String phone;
    
    @Column(length = 100)
    private String email;
    
    @CreationTimestamp
    private Timestamp createdAt;
    
    @UpdateTimestamp
    private Timestamp updatedAt;
    
    // getter/setter ìƒëµ
}
```

### ğŸ“š ì£¼ìš” ì–´ë…¸í…Œì´ì…˜ ì„¤ëª…

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… |
|-----------|------|
| `@Entity` | í´ë˜ìŠ¤ë¥¼ ì—”í‹°í‹°ë¡œ ì§€ì • |
| `@Table` | ë§¤í•‘í•  í…Œì´ë¸” ì´ë¦„ ì§€ì • |
| `@Id` | ê¸°ë³¸í‚¤ í•„ë“œ ì§€ì • |
| `@GeneratedValue` | ê¸°ë³¸í‚¤ ìë™ ìƒì„± ì „ëµ |
| `@Column` | ì»¬ëŸ¼ ìƒì„¸ ì„¤ì • (ê¸¸ì´, null í—ˆìš© ë“±) |
| `@Temporal` | ë‚ ì§œ íƒ€ì… ë§¤í•‘ |
| `@Transient` | ë§¤í•‘ì—ì„œ ì œì™¸í•  í•„ë“œ |

### ğŸ”‘ @GeneratedValue ì „ëµ

```java
// 1. AUTO: DBì— ë§ê²Œ ìë™ ì„ íƒ
@GeneratedValue(strategy = GenerationType.AUTO)

// 2. IDENTITY: DBì˜ AUTO_INCREMENT ì‚¬ìš©
@GeneratedValue(strategy = GenerationType.IDENTITY)

// 3. SEQUENCE: ì‹œí€€ìŠ¤ ì‚¬ìš© (Oracle)
@GeneratedValue(strategy = GenerationType.SEQUENCE)

// 4. TABLE: ë³„ë„ í‚¤ ìƒì„± í…Œì´ë¸” ì‚¬ìš©
@GeneratedValue(strategy = GenerationType.TABLE)
```

---

## ğŸ—‚ï¸ Repository ì¸í„°í˜ì´ìŠ¤

### âœï¸ ê¸°ë³¸ Repository êµ¬ì¡°

```java
@Repository
public interface CustomerRepository extends JpaRepository<Customer, Long> {
    
    // ê¸°ë³¸ CRUD ë©”ì„œë“œëŠ” ìë™ ì œê³µ
    // save(), findById(), findAll(), delete() ë“±
    
    // ì»¤ìŠ¤í…€ ì¿¼ë¦¬ ë©”ì„œë“œ
    List<Customer> findByName(String name);
    List<Customer> findByPhone(String phone);
    List<Customer> findByNameLike(String keyword);
    
    // @Query ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©
    @Query("SELECT c FROM Customer c WHERE c.name LIKE ?1%")
    List<Customer> findByNameStartingWith(String prefix);
    
    // ìˆ˜ì • ì¿¼ë¦¬
    @Transactional
    @Modifying
    @Query("UPDATE Customer c SET c.name = ?1 WHERE c.id = ?2")
    int updateNameById(String name, Long id);
}
```

### ğŸ“Š JpaRepository ì œê³µ ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… |
|--------|------|
| `save(entity)` | ì—”í‹°í‹° ì €ì¥/ìˆ˜ì • |
| `findById(id)` | IDë¡œ ì¡°íšŒ |
| `findAll()` | ì „ì²´ ì¡°íšŒ |
| `delete(entity)` | ì—”í‹°í‹° ì‚­ì œ |
| `count()` | ì´ ê°œìˆ˜ ì¡°íšŒ |
| `existsById(id)` | ì¡´ì¬ ì—¬ë¶€ í™•ì¸ |

---

## ğŸ›ï¸ Spring Boot JPA ì„¤ì •

### ğŸ“ application.properties

```properties
# ë°ì´í„°ì†ŒìŠ¤ ì„¤ì •
spring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver
spring.datasource.url=jdbc:oracle:thin:@127.0.0.1:1521/xe
spring.datasource.username=hr
spring.datasource.password=hr

# JPA ì„¤ì •
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.OracleDialect

# ë¡œê¹… ì„¤ì •
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=trace
logging.level.org.springframework.orm.jpa.JpaTransactionManager=debug
```

### ğŸ”§ H2 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

```properties
# H2 ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 ì½˜ì†” í™œì„±í™”
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# JPA ì„¤ì •
spring.jpa.generate-ddl=true
spring.jpa.show-sql=true
```

---

## ğŸ”— ì—°ê´€ê´€ê³„ ë§¤í•‘

### ğŸ’¡ ì—°ê´€ê´€ê³„ ë§¤í•‘ì´ë€?

ê°ì²´ì˜ ì°¸ì¡°ì™€ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¥¼ ë§¤í•‘í•˜ëŠ” ê²ƒì´ì—ìš”! JPAì—ì„œëŠ” ì™¸ë˜í‚¤ ê°’ì„ ì§ì ‘ ë‹¤ë£¨ì§€ ì•Šê³  **ì—”í‹°í‹° ê°ì²´ ìì²´ë¥¼ ì°¸ì¡°**í•©ë‹ˆë‹¤.

### ğŸ“Š ì—°ê´€ê´€ê³„ ì¢…ë¥˜

| ì–´ë…¸í…Œì´ì…˜ | ê´€ê³„ | ì„¤ëª… |
|-----------|------|------|
| `@OneToOne` | 1:1 | í•œ ëª…ì˜ ê³ ê°ì´ í•˜ë‚˜ì˜ ë°°ì†¡ì§€ |
| `@ManyToOne` | N:1 | ì—¬ëŸ¬ ì£¼ë¬¸ì´ í•œ ëª…ì˜ ê³ ê°ì— ì†í•¨ |
| `@OneToMany` | 1:N | í•œ ëª…ì˜ ê³ ê°ì´ ì—¬ëŸ¬ ì£¼ë¬¸ì„ ê°€ì§ |
| `@ManyToMany` | N:N | í•™ìƒê³¼ ìˆ˜ì—…ì˜ ê´€ê³„ |

### âœï¸ @OneToOne ì˜ˆì œ

```java
// Customer ì—”í‹°í‹° (ì—°ê´€ê´€ê³„ ì£¼ì¸)
@Entity
public class Customer {
    @Id
    @GeneratedValue
    private Long id;
    
    private String name;
    
    @OneToOne
    @JoinColumn(name = "address_id")
    private Address address;
}

// Address ì—”í‹°í‹°
@Entity
public class Address {
    @Id
    @GeneratedValue
    private Long id;
    
    private String zipcode;
    private String address;
    
    @OneToOne(mappedBy = "address")  // ì–‘ë°©í–¥ ì„¤ì •
    private Customer customer;
}
```

### ğŸ¯ FetchType ì „ëµ

```java
// ì¦‰ì‹œ ë¡œë”© (EAGER) - ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì¦‰ì‹œ ì¡°íšŒ
@OneToOne(fetch = FetchType.EAGER)
private Address address;

// ì§€ì—° ë¡œë”© (LAZY) - ì‹¤ì œ ì‚¬ìš©í•  ë•Œ ì¡°íšŒ
@OneToMany(fetch = FetchType.LAZY)
private List<Order> orders;
```

> **ì„±ëŠ¥ íŒ**: ê¸°ë³¸ì ìœ¼ë¡œ `@OneToMany`, `@ManyToMany`ëŠ” LAZY, `@OneToOne`, `@ManyToOne`ì€ EAGERì˜ˆìš”!

---

## ğŸ” JPQLê³¼ QueryDSL

### ğŸ’¡ JPQL(Java Persistence Query Language)

JPQLì€ í…Œì´ë¸”ì´ ì•„ë‹Œ **ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬**ë¥¼ ì‘ì„±í•˜ëŠ” ì–¸ì–´ì˜ˆìš”!

```java
// JPQL ì˜ˆì œ
@Query("SELECT c FROM Customer c WHERE c.name = :name ORDER BY c.id DESC")
List<Customer> findByNameOrdered(@Param("name") String name);

@Query("SELECT c.name, c.phone FROM Customer c WHERE c.name LIKE %:keyword%")
List<Object[]> findNameAndPhoneByKeyword(@Param("keyword") String keyword);
```

### ğŸš€ QueryDSL ì†Œê°œ

QueryDSLì€ **íƒ€ì… ì•ˆì „í•œ ì¿¼ë¦¬**ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í”„ë ˆì„ì›Œí¬ì˜ˆìš”!

```java
// QueryDSL ì˜ˆì œ
@Test
public void queryDslTest() {
    QCustomer qCustomer = QCustomer.customer;
    
    BooleanBuilder builder = new BooleanBuilder();
    builder.and(qCustomer.name.contains("ê¹€"));
    builder.and(qCustomer.phone.startsWith("010"));
    
    Pageable pageable = PageRequest.of(0, 10, Sort.by("name"));
    Page<Customer> result = customerRepository.findAll(builder, pageable);
}
```

---

## ğŸ§ª ì‹¤ë¬´ í…ŒìŠ¤íŠ¸ ì˜ˆì œ

### âœï¸ ê¸°ë³¸ CRUD í…ŒìŠ¤íŠ¸

```java
@SpringBootTest
@Transactional
class CustomerRepositoryTest {
    
    @Autowired
    CustomerRepository customerRepository;
    
    @Test
    @Commit
    void ê³ ê°_ë“±ë¡_í…ŒìŠ¤íŠ¸() {
        // given
        Customer customer = new Customer();
        customer.setName("í™ê¸¸ë™");
        customer.setPhone("010-1234-5678");
        customer.setEmail("hong@test.com");
        
        // when
        Customer savedCustomer = customerRepository.save(customer);
        
        // then
        assertThat(savedCustomer.getId()).isNotNull();
        assertThat(savedCustomer.getName()).isEqualTo("í™ê¸¸ë™");
    }
    
    @Test
    void ì´ë¦„ìœ¼ë¡œ_ê³ ê°_ê²€ìƒ‰_í…ŒìŠ¤íŠ¸() {
        // given
        customerRepository.save(new Customer("ê¹€ì² ìˆ˜", "010-1111-1111"));
        customerRepository.save(new Customer("ê¹€ì˜í¬", "010-2222-2222"));
        
        // when
        List<Customer> customers = customerRepository.findByNameLike("ê¹€%");
        
        // then
        assertThat(customers).hasSize(2);
    }
}
```

### ğŸ”§ ì„œë²„ ì‹œì‘ ì‹œ ìƒ˜í”Œ ë°ì´í„° ì…ë ¥

```java
@Component
public class DataInitializer {
    
    private static final Logger log = LoggerFactory.getLogger(DataInitializer.class);
    
    @Bean
    public CommandLineRunner initData(CustomerRepository repository) {
        return (args) -> {
            // ìƒ˜í”Œ ë°ì´í„° ì €ì¥
            repository.save(new Customer("í™ê¸¸ë™", "010-1234-5678"));
            repository.save(new Customer("ê¹€ì² ìˆ˜", "010-8765-4321"));
            repository.save(new Customer("ì´ì˜í¬", "010-1111-2222"));
            
            // ì €ì¥ëœ ë°ì´í„° í™•ì¸
            log.info("=== ì´ˆê¸° ë°ì´í„° ë¡œë”© ì™„ë£Œ ===");
            repository.findAll().forEach(customer -> 
                log.info("Customer: {}", customer.toString())
            );
        };
    }
}
```

---

## ğŸ› ï¸ í•¨ê»˜ ì•Œë©´ ì¢‹ì€ ì¶”ê°€ ì§€ì‹

### ğŸ’¡ N+1 ë¬¸ì œ í•´ê²°

```java
// ë¬¸ì œê°€ ë˜ëŠ” ì½”ë“œ
@OneToMany(mappedBy = "customer")
private List<Order> orders;

// í•´ê²°ì±… 1: Fetch Join ì‚¬ìš©
@Query("SELECT c FROM Customer c JOIN FETCH c.orders")
List<Customer> findAllWithOrders();

// í•´ê²°ì±… 2: @EntityGraph ì‚¬ìš©
@EntityGraph(attributePaths = {"orders"})
List<Customer> findAll();
```

### ğŸ¯ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì´í•´

```java
@Transactional
public void persistenceContextExample() {
    Customer customer = customerRepository.findById(1L).get();
    customer.setName("ë³€ê²½ëœ ì´ë¦„");  // ì´ ì‹œì ì—ì„œëŠ” UPDATE ì¿¼ë¦¬ ì‹¤í–‰ ì•ˆë¨
    
    // íŠ¸ëœì­ì…˜ ì»¤ë°‹ ì‹œì ì— ë³€ê²½ ê°ì§€(Dirty Checking)ë¡œ UPDATE ì‹¤í–‰
}
```

### ğŸ”„ Audit ê¸°ëŠ¥ í™œìš©

```java
@EntityListeners(AuditingEntityListener.class)
@Entity
public class Customer {
    
    @CreatedDate
    private LocalDateTime createdAt;
    
    @LastModifiedDate
    private LocalDateTime updatedAt;
    
    @CreatedBy
    private String createdBy;
    
    @LastModifiedBy
    private String lastModifiedBy;
}

// Application í´ë˜ìŠ¤ì— ì¶”ê°€
@EnableJpaAuditing
@SpringBootApplication
public class Application {
    // ...
}
```

### âš¡ ì„±ëŠ¥ ìµœì í™” íŒ

```java
// 1. ë°°ì¹˜ ì²˜ë¦¬ ì„¤ì •
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

// 2. ì½ê¸° ì „ìš© ì¿¼ë¦¬ ìµœì í™”
@Transactional(readOnly = true)
public List<Customer> findAllCustomers() {
    return customerRepository.findAll();
}

// 3. í”„ë¡œì ì…˜ ì‚¬ìš©ìœ¼ë¡œ í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì¡°íšŒ
public interface CustomerSummary {
    String getName();
    String getPhone();
}

@Query("SELECT c.name as name, c.phone as phone FROM Customer c")
List<CustomerSummary> findCustomerSummaries();
```

---

## ğŸ“š ì°¸ê³  ìë£Œ (References)

* [Spring Data JPA ê³µì‹ ë¬¸ì„œ](https://docs.spring.io/spring-data/jpa/reference/jpa.html)
  â†’ https://docs.spring.io/spring-data/jpa/reference/jpa.html
* [Hibernate ê³µì‹ ë¬¸ì„œ](https://hibernate.org/orm/documentation/)
  â†’ https://hibernate.org/orm/documentation/
* [QueryDSL ë ˆí¼ëŸ°ìŠ¤](http://querydsl.com/static/querydsl/5.0.0/reference/html_single/)
  â†’ http://querydsl.com/static/querydsl/5.0.0/reference/html_single/
* [H2 Database ê³µì‹ ì‚¬ì´íŠ¸](https://www.h2database.com)
  â†’ https://www.h2database.com
* **ChatGPT (OpenAI)** â€“ JPA ê°œë… ì •ë¦¬ ë° ì‹¤ë¬´ ì˜ˆì œ êµ¬ì„± ë„ì›€

> Spring Bootì™€ JPAë¥¼ í™œìš©í•œ **ê°ì²´ì§€í–¥ì  ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ë°©ë²•**ì„ ìì„¸íˆ ì•Œì•„ë´¤ì–´ìš”! JPAëŠ” ì²˜ìŒì—” ì–´ë ¤ìš¸ ìˆ˜ ìˆì§€ë§Œ, í•œ ë²ˆ ìµìˆ™í•´ì§€ë©´ **ìƒì‚°ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±**ì´ í¬ê²Œ í–¥ìƒë©ë‹ˆë‹¤. **Entity ì„¤ê³„ â†’ Repository ì‘ì„± â†’ í…ŒìŠ¤íŠ¸ ì‘ì„±** ìˆœì„œë¡œ ì°¨ê·¼ì°¨ê·¼ ì—°ìŠµí•´ë³´ì‹œê¸¸ ë°”ë˜ìš”! ë‹¤ìŒì—ëŠ” **Spring Security**ì™€ **RESTful API** êµ¬í˜„ë„ ë‹¤ë¤„ë³¼ê²Œìš”! ğŸ˜Š